<table mat-table [dataSource]="orders"
       class="mat-elevation-z8">
  <ng-container matColumnDef="name">
    <th mat-header-cell *matHeaderCellDef>Besteller</th>
    <td mat-cell *matCellDef="let order">{{ order.name }}</td>
  </ng-container>

  <ng-container matColumnDef="description">
    <th mat-header-cell *matHeaderCellDef class="description-column">Bestellung</th>
    <td class="cell-description, description-column" mat-cell *matCellDef="let order">{{ order.description }}</td>
  </ng-container>

  <ng-container matColumnDef="price">
    <th mat-header-cell *matHeaderCellDef>Preis</th>
    <td mat-cell *matCellDef="let order" class="center-cell">
      {{ order.price | currency:'EUR' }}
    </td>
  </ng-container>

  <ng-container matColumnDef="amountPaid">
    <th mat-header-cell *matHeaderCellDef>Bereits bezahlt</th>
    <td mat-cell *matCellDef="let order" class="center-cell">
      <div class="amount-paid-container">
        <input matInput
               type="number"
               [value]="order.amountPaid"
               (click)="$event.stopPropagation()"
               (change)="updateAmountPaid(order, $event)"
               step="0.01"
               min="0">
        €
      </div>
    </td>
  </ng-container>

  <ng-container matColumnDef="paid">
    <th mat-header-cell *matHeaderCellDef>Bezahlt</th>
    <td mat-cell *matCellDef="let order" class="center-cell">
      <mat-checkbox
        [checked]="order.paid"
        (click)="$event.stopPropagation()"
        (change)="updatePaymentStatus(order)"
        [disabled]="!isBuyer()"
      >
      </mat-checkbox>
    </td>
  </ng-container>

  <ng-container matColumnDef="wantsToJoin">
    <th mat-header-cell *matHeaderCellDef>Begleitet</th>
    <td mat-cell *matCellDef="let order" class="center-cell">
      <mat-checkbox
        [checked]="order.wantsToJoin"
        (click)="$event.stopPropagation()"
        [disabled]="!isBuyer()"
      >
      </mat-checkbox>
    </td>
  </ng-container>

  <ng-container matColumnDef="payNowButton">
    <th mat-header-cell *matHeaderCellDef>Jetzt bezahlen</th>
    <td mat-cell *matCellDef="let order" class="center-cell">
      <button matMiniFab matTooltip="Bestellung hinzufügen" (click)="openPayPalLink(); $event.stopPropagation()"
              [disabled]="order.paid">
        <mat-icon>paypal</mat-icon>
      </button>
    </td>
  </ng-container>

  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let order; columns: displayedColumns;" (click)="editOrder(order)"></tr>
</table>
